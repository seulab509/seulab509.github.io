## 成果展示

### 虚拟实验平台
![虚拟实验平台](/img/虚拟实验平台.JPG)

   本课题研究始于2014年8月的东南大学教改项目“基于Minisys的教学虚拟实验平台研究与设计（项目编号：201450）”，本课题的阶段成果在该项目2015年验收时获得优秀。在此基础上，本课题展开更深入的研究，并获得江苏省高等教育教学改革研究课题“计算机专业系统能力培养的实践类慕课建设研究（项目编号：2015JSJG119）”的支持。在本课题研究期间申请并获得受理发明专利两项，计算机软件著作权一项。
本文通过长期的研究和探索，提出以Zynq-7000异构多核（CPU+FPGA）架构为基础，研究并设计一种既有底层硬件支持，又可远程操作，还能虚拟不同硬件实验平台的远程虚拟数电类实验系统。
针对以上设计目标，本文重点从以下三个方面展开研究和设计：
* 研究和设计整个数电类远程虚拟实验系统的架构。
* 基于Zynq-7000异构多核实验平台，研究并设计数字电路远程监控系统。
* 基于Zynq-7000异构多核实验平台，研究数字电路硬件虚拟方法和虚拟IP核的设计。

   并在以上三点研究的基础上，完成基于Zynq-7000异构多核平台上系统的实现。基于此，本文所做的主要工作包括：
1）研究并设计带有底层硬件支撑的整个远程虚拟数电类实验系统的架构，重点是Zynq-7000硬件实验平台上的系统软硬件架构设计，并详细地阐述系统数电类实验的虚拟特性。

2）研究并设计基于Zynq-7000异构多核硬件实验平台的软件监控程序。研究异构多核平台的系统选型及ARM核间通信方法，并研究设计监控系统的网络通信模块设计方法、数据处理模块设计方法以及解决如何监控FPGA资源问题的方法。

3）研究Zynq-7000异构多核平台的硬件虚拟方法和虚拟IP核的设计。研究设计虚拟IP核电路接口模型，以及虚拟IP核内部数据交换结构的方法。

4）研究并测试系统电路时序传输问题，包括研究测试监控系统与客户端软件之间的网络通信性能，以及Zynq-7000异构多核平台内部电路数据传输路径的带宽。

5）在整个系统研究设计的基础上，实现基于Zynq-7000异构多核平台下的整个软硬件系统，并验证系统的正确性。

### 教学成果
![计算机系统能力培养示范中心](/img/计算机系统能力培养示范中心.JPG)

![计算机系统综合实验室__2_](/img/计算机系统综合实验室__2_.JPG)

![教学成果2](/img/教学成果2.JPG)

![教学成果3](/img/教学成果3.JPG)

### Minisys-1A 

项目名称：基于Nexys 4平台的MiniSys-1A SoC系统设计与实现  
	
项目信息：

应用领域：教育行业

设计摘要：

###### 项目背景与基础

近年来，教育部一直在全国高校计算机专业推行基于系统能力培养的教学实践活动，在计算机专业本科教育中开展以SoC设计为目标的，综合软硬件系列设计的实践教学建设。东南大学计算机科学与工程学院早在2000年就开始统筹规划硬件课程，并于2003年在国内首次开设了以设计MiniSys-1 SoC硬件和系统软件（编译器）为核心的综合课程设计。多年来，该项课程得到全国各高校以及教育部计算机教指委的认同，并获得2009年教育部-Intel精品课程。
限于当年资源有限等多方面原因，MiniSys-1 SoC仅包含一个可执行31条MIPS指令的32位的RISC型处理器核，以及一个BIOS和一个简单的Minisys-1汇编器。Minisys-1的存储结构采用的是哈弗结构，只在CPU中包含片内的4KB ROM和4KB RAM，I/O系统简单，中断系统与MIPS也不兼容。
经过多年的努力，MiniSys-1不断发展壮大，在Altera FPGA平台上陆续引入了31条指令集流水线CPU设计及分支预测技术，乘除法运算单元，符点运算单元，简单的Minisys-1 C编译器，带有简单的Cache结构的双核处理器架构及SMT架构等，流处理器设计也在逐步进行中，不过各个模块并没有集成在一起形成一个完整的SoC系统。

###### 项目任务

在MiniSys-1参考设计推出10周年之际，根据现在教学与科研的需求，结合国外重点高校的实践经验，以及Xilinx平台的最新发展，我们决定在Xilinx最新的Nexys 4平台上打造更为全面实用，能充分利用Nexys 4资源的57条指令集MiniSys-1A SoC。本项目就是基于此而设立的，将作为该课程下一阶段实施的示范设计。具体任务如下：

1）根据现有的31条指令集，扩充设计57条指令的流水线CPU，并改到Nexys 4平台上实现
为了整合之前设计的成果，完善SoC系统，决定首先完善系统的指令集，增设26条指令。增设与乘除法有关的4条算术运算指令mult，multu，div，divu，这样新的Minisys-1A系统在乘除法运算方面得到了保证。Minisys-1系统在数据传送指令方面只有lw和sw指令可以和存储器交换数据，而且只能处理32位的数据传送任务，为了弥补Minisys-1在数据传送和访问存储器方面的欠缺，增设lb，lbu，lh，lhu，sb，sh提高系统字节和半字的存取能力，增加mfhi，mflo，mthi，mtlo数据传送指令，增强乘除法运算对HI和LO寄存器的操作能力。同时引入bgez，bgtz，blez，bltz，bzezal，bltzal，jalr转移指令，完善对操作数分分支条件判断和转移目标地址的功能。另外，为了加强系统对异常中断及系统控制能力，在引入CP0协处理器的同时引入了break，syscall异常处理指令和eret，mfc0，mtc0特权指令。系统的流水线采用经典的五级流水结构，即取指、译码、执行、存储、写回。

2）实现Cache、内存、外存的分层存储结构的设计
综上所述，MiniSys-1的存储结构仅在CPU内部耦合了两个存储模块，一个用来存储指令，另一个用来存储数据，起初这样设计主要是因为系统选用的存储模块容量小、访问速度快，处理器和存储器之间的性能差距不是很大。早期的计算机系统也是如此，1989年之前的处理器是不带Cache的，但是随着存储器容量的增加，处理器和存储器之间的性能差距日益显著，“存储墙”问题也引起了大家广泛的重视。可以说，存储器层次结构的产生是计算机发展的必然结果，其目标就是提供一个存储系统，使之能够具有几乎相当于最便宜层次的存储器的价格，但是访问速度却与最快层次的存储器接近。针对Minisys-1在存储结构方面的不足，新的MiniSys-1A系统设计三级存储层次结构（图1所示）。

3）增设CP0系统控制协处理器，加强系统管理用户模式之外程序的能力
针对Minisys-1在系统控制方面的缺陷，Minisys-1A系统增设CP0协处理器，加强对系统异常/中断的控制能力。

4）利用Nexys4板上资源以及Pmod接口设计系统I/O接口
为了增强系统的实际应用价值，合理利用Nexys4板上资源，针对系统设计I/O接口，如VGA控制、定时/计数器、PWM控制器、LED数码管及键盘控制器等。

5）根据需要，设计一个简单的OS核心，实现命令行式的用户界面。
为了增强系统的管理能力及实际可操作性，根据需要设计一个简单的OS（Operating System）核心并提供命令行式的用户界面，充分利用板上资源及Pmod接口实现一些简单的控制应用。

6）设计57条指令的汇编器
将原来31条指令的汇编器扩展为57条指令的汇编器。
系统原理和技术特点：

 系统采用分层的存储结构，设计三级存储层次结构模型：第一层为Cache，系统采用指令和数据分离的L1级Cache结构并根据实际设计考虑增设L2级指令和数据共享Cache；第二层为内存；第三层为外存.
系统设计结构包括CPU核心，中断控制器、Cache结构，I/O控制器，指令预取器.

### 基于Zynq的带快速运算异构微服务器及其在气象数据处理中的应用

“基于Zynq的带快速运算异构微服务器”由东南大学计算机学院研发，该微服务器由“带快速运算的微服务器子系统”和“基于层叠架构多Zynq快速运算子系统”组成。带快速运算的微服务器子系统运行在一块带有微服务器的Zedboard板上。该系统首先被用于气象数据处理中快读处理气象水文数据报文解析、绘制气象水文信息等值线图以及快速生成历史卫星云图特征库用以寻找历史云图中相似气象云图，“基于Zynq的带快速运算异构微服务器”可以应用在那些需要大量数据运算和需要便携式微服务器的各种领域。

![基于Zynq的带快速运算异构微服务器](/img/基于Zynq的带快速运算异构微服务器.JPG)

![2016年OpenHW大赛获最佳异构微服务器应用奖](/img/2016年OpenHW大赛获最佳异构微服务器应用奖.JPG)
